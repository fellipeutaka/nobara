---
import { tv, type VariantProps } from "mizuhara/utils";
import { Icons } from "./icons";

const CalloutStyles = tv({
  base: [
    "mt-6 flex items-start rounded-md border py-3 px-4",
    "contrast-more:border-current contrast-more:dark:border-current",
  ],
  variants: {
    type: {
      info: [
        "text-blue-800 border-blue-200 bg-blue-100 dark:text-blue-200 dark:border-blue-200/40 dark:bg-blue-900/40",
      ],
      danger: [
        "text-red-900 border-red-200 bg-red-100 dark:text-red-200 dark:border-red-200/30 dark:bg-red-900/40",
      ],
      warning: [
        "text-orange-800 border-orange-200 bg-orange-100 dark:text-orange-300 dark:border-orange-400/30 dark:bg-orange-400/20",
      ],
    },
  },
});

interface Props extends VariantProps<typeof CalloutStyles> {}

const TypeToEmoji = {
  default: "💡",
  danger: "🚫",
  info: Icons.Info,
  warning: "⚠️",
};

const { type } = Astro.props;

const emoji = TypeToEmoji[type ?? "default"];
---

<div class={CalloutStyles({ type })}>
  <div class="select-none pr-2 text-xl">
    {type === "info" ? <Icons.Info className="mt-1" /> : emoji}
  </div>
  <div class="w-full min-w-0 leading-7">
    <slot />
  </div>
</div>
